<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Pesanan Pengembalian Terlambat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F3F4F6;
        }

        .modal {
            display: none;
        }

        .modal.open {
            display: flex;
        }

        .order-card {
            padding: 1rem;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .order-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .order-card h3 {
            font-size: 1rem;
        }

        .order-card .info-row {
            font-size: 0.8rem;
            line-height: 1.25;
        }

        .order-card .total-price {
            font-size: 1.125rem;
        }
        
        .bottom-bar {
            display: flex;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background-color: #111827;
            height: 64px;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .bottom-bar-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            color: #9CA3AF;
            transition: color 0.2s;
            text-align: center;
        }

        .bottom-bar-item.active {
            color: #F08519;
        }

        .bottom-bar-item:hover {
            color: #E5E7EB;
        }

        .bottom-bar-item span {
            font-size: 0.75rem;
            margin-top: 4px;
            font-weight: 500;
        }

        /* Desktop view */
        @media (min-width: 1024px) {
            .sidebar {
                display: flex !important; /* Override mobile hide */
                height: 100vh;
                position: sticky;
                top: 0;
            }
            .bottom-bar {
                display: none;
            }

        }
        
        /* Mobile view */
        @media (max-width: 1023px) {
            .sidebar {
                display: none;
            }
            main {
                padding-bottom: 70px; /* Add padding to prevent content from hiding behind bottom bar */
            }
            .main-content-wrapper {
                width: 100%;
            }
            .modal > div {
                margin: 0.5rem;
                width: calc(100% - 1rem);
            }
        }
        
        /* Custom scrollbar for sidebar */
        .sidebar::-webkit-scrollbar {
            width: 5px;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #4B5563;
            border-radius: 5px;
        }
        
        .sidebar:hover::-webkit-scrollbar-thumb {
            background: #6B7280;
        }
    </style>
</head>
<body class="bg-gray-100 flex min-h-screen lg:flex-row">

    <aside id="sidebar" class="w-64 bg-gray-900 text-white flex-col transition-all duration-300 hidden lg:flex">
        <div class="p-6 text-2xl font-bold flex items-center justify-center border-b border-gray-800">
            <img src="/asset/logo.png" alt="Alam Bara Logo" class="h-12 w-12 rounded-full">
            <span class="ml-2">Alam Bara</span>
        </div>
        <nav class="flex-1 mt-6">
            <ul class="space-y-1">
                <li><a href="#" class="flex items-center py-2.5 px-6 text-gray-400 hover:bg-gray-800 hover:text-white transition duration-200"><i class="fas fa-tachometer-alt mr-4 text-orange-400"></i><span>Dashboard</span></a></li>
                <li><a href="#" class="flex items-center py-2.5 px-6 text-gray-400 hover:bg-gray-800 hover:text-white transition duration-200"><i class="fas fa-box-open mr-4 text-orange-400"></i><span>Manajemen Produk</span></a></li>
                <li id="pesanan-menu" class="relative cursor-pointer">
                    <a class="flex items-center justify-between py-2.5 px-6 text-white font-semibold bg-gray-800" style="color: #F08519;">
                        <span><i class="fas fa-clipboard-list mr-4"></i><span>Manajemen Pesanan</span></span>
                        <i id="pesanan-arrow" class="fas fa-chevron-down text-sm transition-transform duration-300 rotate-180"></i>
                    </a>
                    <ul id="pesanan-child-nav" class="pl-12 py-2 space-y-1">
                        <li><a href="#" class="flex items-center py-2 px-4 text-sm text-gray-400 hover:bg-gray-700 rounded"><span>Siap Diambil</span></a></li>
                        <li><a href="#" class="flex items-center py-2 px-4 text-sm text-gray-400 hover:bg-gray-700 rounded"><span>Sedang Disewa</span></a></li>
                        <li><a href="#" class="flex items-center py-2 px-4 text-sm text-gray-400 hover:bg-gray-700 rounded"><span>Sudah Dikembalikan</span></a></li>
                        <li><a href="#" class="flex items-center py-2 px-4 text-sm bg-orange-500 text-white font-medium rounded transition duration-200"><span>Pengembalian Terlambat</span></a></li>
                    </ul>
                </li>
                <li><a href="#" class="flex items-center py-2.5 px-6 text-gray-400 hover:bg-gray-800 hover:text-white transition duration-200"><i class="fas fa-users-cog mr-4 text-orange-400"></i><span>Manajemen Pengguna</span></a></li>
                <li><a href="#" class="flex items-center py-2.5 px-6 text-gray-400 hover:bg-gray-800 hover:text-white transition duration-200"><i class="fas fa-chart-line mr-4 text-orange-400"></i><span>Laporan</span></a></li>
            </ul>
        </nav>
        <div class="mt-auto p-4 border-t border-gray-800">
            <a href="#" class="flex items-center py-2.5 px-4 text-gray-400 hover:bg-gray-800 hover:text-white rounded transition duration-200"><i class="fas fa-sign-out-alt mr-4 text-orange-400"></i><span>Keluar</span></a>
        </div>
    </aside>

    <div class="flex-1 flex flex-col">
         <header class="bg-white shadow-md p-4 flex justify-between items-center lg:hidden sticky top-0 z-20">
            <div class="flex items-center">
                <img src="/asset/logo.png" alt="Alam Bara Logo" class="h-8 w-8 rounded-full mr-2">
                <span class="text-xl font-bold text-gray-800">Alam Bara</span>
            </div>
            <div class="flex items-center space-x-4">
                <div class="relative"><button class="text-gray-600 hover:text-gray-800"><i class="fas fa-bell text-lg"></i></button><span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">5</span></div>
                <div class="relative"><button class="flex items-center space-x-2 focus:outline-none"><img src="https://ui-avatars.com/api/?name=Admin&background=10b981&color=fff" alt="Admin" class="w-8 h-8 rounded-full"><span class="font-medium text-gray-800 hidden md:inline">Admin</span></button></div>
            </div>
        </header>

        <main class="flex-1 p-4 md:p-8">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-3">
                <h1 class="text-2xl font-bold text-gray-800">Pesanan Pengembalian Terlambat</h1>
            </div>

            <div id="order-list" class="grid grid-cols-2 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            </div>
        </main>
    </div>

    <nav class="bottom-bar">
        <a href="#" class="bottom-bar-item">
            <i class="fas fa-tachometer-alt text-lg"></i>
            <span>Dashboard</span>
        </a>
        <a href="#" class="bottom-bar-item">
            <i class="fas fa-box-open text-lg"></i>
            <span>Produk</span>
        </a>
        <a href="#" class="bottom-bar-item active">
            <i class="fas fa-clipboard-list text-lg"></i>
            <span>Pesanan</span>
        </a>
        <a href="#" class="bottom-bar-item">
            <i class="fas fa-users-cog text-lg"></i>
            <span>Pengguna</span>
        </a>
        <a href="#" class="bottom-bar-item">
            <i class="fas fa-chart-line text-lg"></i>
            <span>Laporan</span>
        </a>
    </nav>

    <div id="order-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-4 md:p-6 w-full max-w-lg mx-4 md:mx-auto max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h3 class="text-xl font-semibold text-gray-800">Detail Pesanan <span id="modal-order-id"></span></h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="modal-content">
            </div>
        </div>
    </div>

    <script>
        // Data pesanan contoh (simulasi dari database)
        const orders = [
            { id: '#AB-010', customerName: 'Rani Widjaya', nik: '327316xxxx', phone: '081234567890', jaminan: 'SIM', pickupDate: '10/09/25', dueDate: '13/09/25', lateDays: 3, totalPrice: 300000, status: 'Terlambat', items: [{ name: 'Tenda Dome Kapasitas 4', qty: 1, dailyPrice: 50000, rentalDays: 3, subtotal: 150000 }, { name: 'Sleeping Bag', qty: 2, dailyPrice: 20000, rentalDays: 3, subtotal: 120000 }] },
            { id: '#AB-011', customerName: 'Fahri Hidayat', nik: '327317xxxx', phone: '081298765432', jaminan: 'KTP', pickupDate: '09/09/25', dueDate: '15/09/25', lateDays: 1, totalPrice: 540000, status: 'Terlambat', items: [{ name: 'Tas Carrier 60L', qty: 1, dailyPrice: 30000, rentalDays: 6, subtotal: 180000 }, { name: 'Trekking Pole', qty: 2, dailyPrice: 15000, rentalDays: 6, subtotal: 180000 }] },
            { id: '#AB-012', customerName: 'Dewi Lestari', nik: '327318xxxx', phone: '081112223334', jaminan: 'Paspor', pickupDate: '08/09/25', dueDate: '13/09/25', lateDays: 3, totalPrice: 250000, status: 'Terlambat', items: [{ name: 'Kompor Portable', qty: 1, dailyPrice: 20000, rentalDays: 5, subtotal: 100000 }] },
            { id: '#AB-013', customerName: 'Bayu Nugroho', nik: '327319xxxx', phone: '081556677889', jaminan: 'KTP', pickupDate: '07/09/25', dueDate: '11/09/25', lateDays: 5, totalPrice: 400000, status: 'Terlambat', items: [{ name: 'Hammock', qty: 1, dailyPrice: 25000, rentalDays: 4, subtotal: 100000 }, { name: 'Tenda Dome Kapasitas 2', qty: 1, dailyPrice: 40000, rentalDays: 4, subtotal: 160000 }] },
        ];

        const orderListContainer = document.getElementById('order-list');
        const orderModal = document.getElementById('order-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const modalContent = document.getElementById('modal-content');
        const modalOrderId = document.getElementById('modal-order-id');

        // Fungsi untuk membuat kartu pesanan
        function createOrderCard(order) {
            const card = document.createElement('div');
            card.className = 'bg-white shadow-lg rounded-lg p-4 cursor-pointer hover:shadow-xl transition-shadow duration-300 order-card';
            card.setAttribute('data-order-id', order.id);
            card.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-bold text-gray-800 text-base">${order.id}</h3>
                    <span class="bg-red-200 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full">${order.status}</span>
                </div>
                <div class="space-y-1 text-sm text-gray-600 info-row">
                    <p class="truncate"><i class="fas fa-user mr-2 text-blue-500"></i><strong>${order.customerName}</strong></p>
                    <p class="truncate"><i class="fas fa-id-card mr-2 text-green-500"></i>${order.nik}</p>
                    <p class="truncate"><i class="fas fa-phone mr-2 text-purple-500"></i>${order.phone}</p>
                    <p><i class="fas fa-key mr-2 text-red-500"></i>${order.jaminan}</p>
                    <p><i class="fas fa-calendar-alt mr-2 text-purple-500"></i>Tgl Ambil: ${order.pickupDate}</p>
                    <p><i class="fas fa-calendar-check mr-2 text-red-500"></i>Tgl Jatuh Tempo: ${order.dueDate}</p>
                </div>
                <div class="mt-4 pt-4 border-t border-gray-200 text-right">
                    <p class="text-lg font-bold text-gray-800 total-price">Rp ${order.totalPrice.toLocaleString('id-ID')}</p>
                </div>
            `;
            card.addEventListener('click', () => showModal(order));
            return card;
        }

        // Fungsi untuk menampilkan modal dengan detail
        function showModal(order) {
            modalOrderId.innerText = order.id;
            modalContent.innerHTML = `
                <div class="space-y-2 text-sm text-gray-600 mb-4">
                    <p><strong>Nama:</strong> ${order.customerName}</p>
                    <p><strong>NIK:</strong> ${order.nik}</p>
                    <p><strong>Telepon:</strong> ${order.phone}</p>
                    <p><strong>Jaminan:</strong> ${order.jaminan}</p>
                    <p><strong>Tgl Ambil:</strong> ${order.pickupDate}</p>
                    <p><strong>Tgl Jatuh Tempo:</strong> ${order.dueDate}</p>
                    <p class="font-bold text-red-600">Terlambat: ${order.lateDays} hari</p>
                </div>
                <h4 class="text-base font-bold mb-2">Barang Sewa:</h4>
                <div class="overflow-x-auto">
                    <table class="w-full text-xs text-left text-gray-500 mb-4">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-3 py-2">Alat</th>
                                <th scope="col" class="px-3 py-2">Jml</th>
                                <th scope="col" class="px-3 py-2">Harga/Hr</th>
                                <th scope="col" class="px-3 py-2">Hari</th>
                                <th scope="col" class="px-3 py-2">Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${order.items.map(item => `
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-3 py-2 whitespace-nowrap">${item.name}</td>
                                    <td class="px-3 py-2">${item.qty}</td>
                                    <td class="px-3 py-2">Rp ${item.dailyPrice.toLocaleString('id-ID')}</td>
                                    <td class="px-3 py-2">${item.rentalDays}</td>
                                    <td class="px-3 py-2">Rp ${item.subtotal.toLocaleString('id-ID')}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                <div class="text-right text-lg font-bold text-gray-800">
                    Total: <span class="text-green-600">Rp ${order.totalPrice.toLocaleString('id-ID')}</span>
                </div>
                <div class="mt-6 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 action-buttons">
                    <button class="bg-blue-600 text-white font-medium py-2 px-4 text-sm rounded-lg hover:bg-blue-700 transition-colors"><i class="fas fa-phone mr-2"></i>Hubungi Pelanggan</button>
                    <button class="bg-red-600 text-white font-medium py-2 px-4 text-sm rounded-lg hover:bg-red-700 transition-colors"><i class="fas fa-calculator mr-2"></i>Hitung Denda</button>
                </div>
            `;
            orderModal.classList.add('open');
        }

        // Fungsi untuk menutup modal
        closeModalBtn.addEventListener('click', () => {
            orderModal.classList.remove('open');
        });

        // Menutup modal saat mengklik di luar area modal
        orderModal.addEventListener('click', (e) => {
            if (e.target === orderModal) {
                orderModal.classList.remove('open');
            }
        });

        // Render semua kartu pesanan
        orders.forEach(order => {
            const card = createOrderCard(order);
            orderListContainer.appendChild(card);
        });

        // JavaScript untuk sidebar
        const pesananMenu = document.getElementById('pesanan-menu');
        const pesananChildNav = document.getElementById('pesanan-child-nav');
        const pesananArrow = document.getElementById('pesanan-arrow');

        pesananMenu.addEventListener('click', () => {
            pesananChildNav.classList.toggle('hidden');
            pesananArrow.classList.toggle('rotate-180');
        });
    </script>
</body>
</html>